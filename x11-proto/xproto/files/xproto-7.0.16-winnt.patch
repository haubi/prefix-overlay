diff -ru xproto-7.0.16.orig/Xw32defs.h xproto-7.0.13/Xw32defs.h
--- xproto-7.0.16.orig/Xw32defs.h	2008-09-23 10:18:35 +0200
+++ xproto-7.0.16/Xw32defs.h	2008-09-23 10:21:12 +0200
@@ -10,6 +10,10 @@ typedef char *caddr_t;
 # else
 typedef char *caddr_t;
 
+#ifdef __PARITY__
+# include <unistd.h>
+# include <sys/stat.h>
+#else
 #  define access	   _access
 #  define alloca	   _alloca
 #  define chdir	_chdir
@@ -75,5 +79,7 @@ typedef char *caddr_t;
 #  define	X_OK	1
 #  define	W_OK	2
 #  define	R_OK	4
+
+#endif /* __PARITY__ */
 # endif /* __GNUC__ */
 #endif
diff -ru xproto-7.0.16.orig/Xwinsock.h xproto-7.0.13/Xwinsock.h
--- xproto-7.0.16.orig/Xwinsock.h	2008-09-23 10:18:35 +0200
+++ xproto-7.0.16/Xwinsock.h	2008-09-23 10:16:39 +0200
@@ -48,6 +48,7 @@
 #define BYTE wBYTE
 #define FreeResource wFreeResource
 #include <winsock2.h>
+#include <ws2tcpip.h>
 #undef Status
 #define Status int
 #undef BYTE
diff -ru xproto-7.0.16.orig/configure.ac xproto-7.0.13/configure.ac
--- xproto-7.0.16.orig/configure.ac	2008-09-23 10:18:35 +0200
+++ xproto-7.0.16/configure.ac	2008-09-23 10:16:38 +0200
@@ -37,7 +37,7 @@
 # Handle Xpoll.h.in
 # Avoid determining fds_bits on WIN32 hosts (not including cygwin)
 case $host_os in
-	mingw*)		fds_bits_found=true;;
+	mingw*|winnt*)		fds_bits_found=true;;
 	*)		fds_bits_found=false;;
 esac
 
diff -ru xproto-7.0.16.orig/Xos.h xproto-7.0.13/Xos.h
--- xproto-7.0.16.orig/Xos.h	2008-09-25 10:32:27 +0200
+++ xproto-7.0.16/Xos.h	2008-09-25 10:36:06 +0200
@@ -100,13 +100,7 @@ in this Software without prior written a
 #  define _POSIX_SOURCE
 # elif defined(WIN32)
 #  include <time.h>
-#  if !defined(_WINSOCKAPI_) && !defined(_WILLWINSOCK_) && !defined(_TIMEVAL_DEFINED) && !defined(_STRUCT_TIMEVAL)
-struct timeval {
-    long    tv_sec;         /* seconds */
-    long    tv_usec;        /* and microseconds */
-};
-#   define _TIMEVAL_DEFINED
-#  endif
+#include <X11/Xwinsock.h>
 #  include <sys/timeb.h>
 #  define gettimeofday(t) \
 { \
