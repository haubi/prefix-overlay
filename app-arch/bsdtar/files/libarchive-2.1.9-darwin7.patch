--- libarchive/archive_write_disk_set_standard_lookup.c
+++ libarchive/archive_write_disk_set_standard_lookup.c
@@ -30,6 +30,9 @@
 #include <errno.h>
 #endif
 #ifdef HAVE_GRP_H
+#ifdef HAVE_SYS_TYPES_H
+#include <sys/types.h>	/* we need this on Darwin 7 */
+#endif
 #include <grp.h>
 #endif
 #ifdef HAVE_PWD_H
