--- src/isnan.h
+++ src/isnan.h
@@ -34,7 +34,7 @@
 # define isNaN(_a) (_isnan(_a)) 	/* Win32 definition */
 #elif defined(isnan) || defined(__FreeBSD__) || defined(__osf__)
 # define isNaN(_a) (isnan(_a))		/* GNU definition */
-#elif defined (SOLARIS_2_8) && __GNUC__ == 3 && __GNUC_MINOR__ == 2
+#elif defined(__sun__) && defined(__GNUC__)
 # define isNaN(_a) (isnan(_a))		/* GNU definition */
 #else
 # define isNaN(_a) (std::isnan(_a))
@@ -55,7 +55,7 @@
 # define isFinite(_a) (isfinite(_a))
 #elif defined(__osf__)
 # define isFinite(_a) (finite(_a) && !isNaN(_a))
-#elif defined (SOLARIS_2_8) && __GNUC__ == 3 && __GNUC_MINOR__ == 2
+#elif defined(__sun__) && defined(__GNUC__)
 #include  <ieeefp.h>
 #define isFinite(_a) (finite(_a) && !isNaN(_a))
 #else
--- src/isinf.h
+++ src/isinf.h
@@ -5,7 +5,7 @@
  * Fix for missing std::isnormal with SOLARIS8/GCC3.2
  */
  
-#if defined (SOLARIS_2_8) && __GNUC__ == 3 && __GNUC_MINOR__ == 2
+#if defined(__sun__) && defined(__GNUC__)
 
 	#include <ieeefp.h>
 	#define isinf(x) ((fpclass(x) == FP_NINF) || (fpclass(x) == FP_PINF))
--- src/2geom/isnan.h
+++ src/2geom/isnan.h
@@ -34,6 +34,8 @@
 # define is_nan(_a) (_isnan(_a)) 	/* Win32 definition */
 #elif defined(isnan) || defined(__FreeBSD__)
 # define is_nan(_a) (isnan(_a))		/* GNU definition */
+#elif defined(__sun__) && defined(__GNUC__)
+# define is_nan(_a) (isnan(_a))		/* GNU definition */
 #else
 # define is_nan(_a) (std::isnan(_a))
 #endif
@@ -49,6 +51,9 @@
 # define is_finite(_a) (__isfinite(_a))	/* MacOSX/Darwin definition < 10.4 */
 #elif defined(isfinite)
 # define is_finite(_a) (isfinite(_a))
+#elif defined(__sun__) && defined(__GNUC__)
+#include  <ieeefp.h>
+#define is_finite(_a) (finite(_a) && !is_nan(_a))
 #else
 # define is_finite(_a) (std::isfinite(_a))
 #endif
--- utf8-to-roff
+++ utf8-to-roff
@@ -1,4 +1,4 @@
-#! /usr/bin/perl -w -CI
+##! /usr/bin/perl -w -CI
 # Converts a man page from utf8 (not understood by groff 1.18) to groff escapes.
 # I couldn't find any existing tool to convert from utf8 to groff, though I
 # seem to recall seeing some code to do so somewhere.
