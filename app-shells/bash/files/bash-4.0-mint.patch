http://bugs.gentoo.org/show_bug.cgi?id=269919

diff -ur /var/tmp/portage/app-shells/bash-4.0_p17-r1/work/bash-4.0/externs.h bash-4.0/externs.h
--- /var/tmp/portage/app-shells/bash-4.0_p17-r1/work/bash-4.0/externs.h	2009-01-18 23:29:29.000000000 +0000
+++ bash-4.0/externs.h	2009-05-14 16:29:22.000000000 +0000
@@ -25,6 +25,7 @@
 #  define _EXTERNS_H_
 
 #include "stdc.h"
+#include <stdio.h>
 
 /* Functions from expr.c. */
 extern intmax_t evalexp __P((char *, int *));
diff -ur /var/tmp/portage/app-shells/bash-4.0_p17-r1/work/bash-4.0/lib/sh/fpurge.c bash-4.0/lib/sh/fpurge.c
--- /var/tmp/portage/app-shells/bash-4.0_p17-r1/work/bash-4.0/lib/sh/fpurge.c	2008-08-12 15:52:35.000000000 +0000
+++ bash-4.0/lib/sh/fpurge.c	2009-05-14 17:02:43.000000000 +0000
@@ -115,6 +115,21 @@
     fp->__bufpos = fp->__bufread;
 #  endif
   return 0;
+# elif defined __MINT__             /* Atari FreeMiNT */
+  if (fp->__pushed_back)
+    {
+      fp->__bufp = fp->__pushback_bufp;
+      fp->__pushed_back = 0;
+    }
+  /* Preserve the current file position.  */
+  if (fp->__target != -1)
+    fp->__target += fp->__bufp - fp->__buffer;
+  fp->__bufp = fp->__buffer;
+  /* Nothing in the buffer, next getc is nontrivial.  */
+  fp->__get_limit = fp->__bufp;
+  /* Nothing in the buffer, next putc is nontrivial.  */
+  fp->__put_limit = fp->__buffer;
+  return 0;
 # else
  #error "Please port gnulib fpurge.c to your platform! Look at the definitions of fflush, setvbuf and ungetc on your system, then report this to bug-gnulib."
 # endif
