#!@GENTOO_PORTAGE_EPREFIX@/bin/bash
# $Id$

# Invokes the linker with an appropriate amount of flags to make it
# recognise the used EPREFIX.  For cross-compilation purposes, this
# script picks up EPREFIX from the environment, or sets it to the
# compile-time default.

TPREFIX=@GENTOO_PORTAGE_TPREFIX@

[[ -e ${EPREFIX}/etc/env.d/05gcc ]] &&
	GCC_LIBS=$(source "${TPREFIX}"/etc/env.d/05gcc; echo ${LDPATH/:*/})
[[ -e ${EPREFIX}/etc/env.d/05binutils ]] &&
	LD_LIBS=$(source "${TPREFIX}"/etc/env.d/05binutils; echo ${LDPATH/:*/})

locations=( @GENTOO_PORTAGE_LIB_PATHS@ )
locations=( ${locations[@]/#/${TPREFIX}} )
Llocations=( ${GCC_LIBS} ${LD_LIBS} ${locations[@]} )
Rlocations=( ${GCC_LIBS} ${LD_LIBS} ${locations[@]} )

@GENTOO_PORTAGE_CTARGET_LINKER@ \
	@GENTOO_PORTAGE_LINKER_OPTIONS@ \
	"${@}" \
	"${Llocations[@]/#/@GENTOO_PORTAGE_LIBFLAG@}" \
	"${Rlocations[@]/#/@GENTOO_PORTAGE_RPATHFLAG@}" \

