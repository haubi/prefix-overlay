Add EPREFIX here and there

diff -ur PortageXS-0.02.08.orig/lib/PortageXS/Core.pm PortageXS-0.02.08/lib/PortageXS/Core.pm
--- PortageXS-0.02.08.orig/lib/PortageXS/Core.pm	2008-05-12 14:34:49.000000000 +0200
+++ PortageXS-0.02.08/lib/PortageXS/Core.pm	2008-05-30 15:51:05.622656000 +0200
@@ -94,7 +94,7 @@
 
 	@files=$self->getArchHelper($curPath);
 
-	$buffer.=$self->getFileContents('/etc/make.conf').$self->getFileContents('/etc/make.globals');
+	$buffer.=$self->getFileContents('@GENTOO_PORTAGE_EPREFIX@/etc/make.conf').$self->getFileContents('@GENTOO_PORTAGE_EPREFIX@/etc/make.globals');
 	foreach(@files) {
 		$buffer.=$self->getFileContents($_);
 	}
@@ -124,7 +124,7 @@
 		return $self->{'PORTDIR'};
 	}
 	else {
-		$self->{'PORTDIR'}=$self->getParamFromFile($self->getFileContents('/etc/make.globals').$self->getFileContents('/etc/make.conf'),'PORTDIR','lastseen');
+		$self->{'PORTDIR'}=$self->getParamFromFile($self->getFileContents('@GENTOO_PORTAGE_EPREFIX@/etc/make.globals').$self->getFileContents('@GENTOO_PORTAGE_EPREFIX@/etc/make.conf'),'PORTDIR','lastseen');
 		return $self->{'PORTDIR'};
 	}
 }
@@ -141,7 +141,7 @@
 	my $self	= shift;
 	my $forcereload	= shift;
 	
-	return split(/ /,$self->getParamFromFile($self->getFileContents('/etc/make.globals').$self->getFileContents('/etc/make.conf'),'PORTDIR_OVERLAY','lastseen'));
+	return split(/ /,$self->getParamFromFile($self->getFileContents('@GENTOO_PORTAGE_EPREFIX@/etc/make.globals').$self->getFileContents('@GENTOO_PORTAGE_EPREFIX@/etc/make.conf'),'PORTDIR_OVERLAY','lastseen'));
 }
 
 # Description:
diff -ur PortageXS-0.02.08.orig/lib/PortageXS.pm PortageXS-0.02.08/lib/PortageXS.pm
--- PortageXS-0.02.08.orig/lib/PortageXS.pm	2008-05-12 14:34:49.000000000 +0200
+++ PortageXS-0.02.08/lib/PortageXS.pm	2008-05-30 15:47:17.645641000 +0200
@@ -61,8 +61,8 @@
 	$self->{'VERSION'}			= $VERSION;
 	
 	$self->{'PORTDIR'}			= $self->getPortdir();
-	$self->{'PKG_DB_DIR'}			= '/var/db/pkg/';
-	$self->{'PATH_TO_WORLDFILE'}		= '/var/lib/portage/world';
+	$self->{'PKG_DB_DIR'}			= '@GENTOO_PORTAGE_EPREFIX@/var/db/pkg/';
+	$self->{'PATH_TO_WORLDFILE'}		= '@GENTOO_PORTAGE_EPREFIX@/var/lib/portage/world';
 	$self->{'IS_INITIALIZED'}		= 1;
 	
 	$self->{'EXCLUDE_DIRS'}{'.'}		= 1;
@@ -75,9 +75,9 @@
 	$self->{'EXCLUDE_DIRS'}{'CVS'}		= 1;
 	$self->{'EXCLUDE_DIRS'}{'.cache'}	= 1;
 	
-	$self->{'PORTAGEXS_ETC_DIR'}		= '/etc/pxs/';
-	$self->{'ETC_DIR'}			= '/etc/';
-	$self->{'MAKE_PROFILE_PATH'}		= '/etc/make.profile';
+	$self->{'PORTAGEXS_ETC_DIR'}		= '@GENTOO_PORTAGE_EPREFIX@/etc/pxs/';
+	$self->{'ETC_DIR'}			= '@GENTOO_PORTAGE_EPREFIX@/etc/';
+	$self->{'MAKE_PROFILE_PATH'}		= '@GENTOO_PORTAGE_EPREFIX@/etc/make.profile';
 	
 	# - init colors >
 	$self->{'COLORS'}{'YELLOW'}		= color('bold yellow');
@@ -89,7 +89,7 @@
 	$self->{'COLORS'}{'BLUE'}		= color('bold blue');
 	$self->{'COLORS'}{'RESET'}		= color('reset');
 	
-	if (lc($self->getParamFromFile($self->getFileContents('/etc/make.conf'),'NOCOLOR','lastseen')) eq 'true') {
+	if (lc($self->getParamFromFile($self->getFileContents('@GENTOO_PORTAGE_EPREFIX@/etc/make.conf'),'NOCOLOR','lastseen')) eq 'true') {
 		$self->{'COLORS'}{'YELLOW'}		= '';
 		$self->{'COLORS'}{'GREEN'}		= '';
 		$self->{'COLORS'}{'LIGHTGREEN'}		= '';
Only in PortageXS-0.02.08: prefix.patch
diff -ur PortageXS-0.02.08.orig/usr/bin/portagexs_client PortageXS-0.02.08/usr/bin/portagexs_client
--- PortageXS-0.02.08.orig/usr/bin/portagexs_client	2008-05-12 14:34:49.000000000 +0200
+++ PortageXS-0.02.08/usr/bin/portagexs_client	2008-05-30 15:43:02.678788000 +0200
@@ -1,4 +1,4 @@
-#!/usr/bin/perl
+#!@GENTOO_PORTAGE_EPREFIX@/usr/bin/perl
 
 # -----------------------------------------------------------------------------
 #
@@ -54,9 +54,9 @@
 				SSL_use_cert => 1,
 				SSL_verify_mode => 0x01,
 				SSL_passwd_cb => sub { return "" },
-				SSL_key_file => '/etc/pxs/certs/client-key.pem',
-				SSL_cert_file => '/etc/pxs/certs/client-cert.pem',
-				SSL_ca_file => '/etc/pxs/certs/my-ca.pem'
+				SSL_key_file => '@GENTOO_PORTAGE_EPREFIX@/etc/pxs/certs/client-key.pem',
+				SSL_cert_file => '@GENTOO_PORTAGE_EPREFIX@/etc/pxs/certs/client-cert.pem',
+				SSL_ca_file => '@GENTOO_PORTAGE_EPREFIX@/etc/pxs/certs/my-ca.pem'
 				 ))) {
 	$pxs->print_err("unable to create socket: ".&IO::Socket::SSL::errstr."\n");
 	$pxs->print_err("Server down?\n");
diff -ur PortageXS-0.02.08.orig/usr/sbin/portagexsd PortageXS-0.02.08/usr/sbin/portagexsd
--- PortageXS-0.02.08.orig/usr/sbin/portagexsd	2008-05-12 14:34:49.000000000 +0200
+++ PortageXS-0.02.08/usr/sbin/portagexsd	2008-05-30 15:45:51.343654000 +0200
@@ -1,4 +1,4 @@
-#!/usr/bin/perl -t
+#!@GENTOO_PORTAGE_EPREFIX@/usr/bin/perl -t
 
 # -----------------------------------------------------------------------------
 #
@@ -50,7 +50,7 @@
 sub main {
 	# - Parse config >
 	my %config	= ();
-	$config{'cfgfiledata'} = $pxs->getFileContents("/etc/pxs/portagexsd.conf");
+	$config{'cfgfiledata'} = $pxs->getFileContents("@GENTOO_PORTAGE_EPREFIX@/etc/pxs/portagexsd.conf");
 	$config{'Port'} = $pxs->getParamFromFile($config{'cfgfiledata'},"Port","lastseen");
 	$config{'SSLpasswd'} = $pxs->getParamFromFile($config{'cfgfiledata'},"SSLpasswd","lastseen");
 	$config{'PidFile'} = $pxs->getParamFromFile($config{'cfgfiledata'},"PidFile","lastseen");
@@ -60,7 +60,8 @@
 	$config{'cfgfiledata'} = undef;
 	
 	if (!$config{'I_AM_ROOT_AND_I_KNOW_WHAT_I_AM_DOING'}) {
-		syslog("info", 'Not starting server as it seems that you did not have a look at the configs yet! (/etc/pxs/portagexsd.conf)');
+		syslog("info", 'Not starting server as it seems that you did not
+			have a look at the configs yet! (@GENTOO_PORTAGE_EPREFIX@/etc/pxs/portagexsd.conf)');
 		exit(0);
 	}
 	
@@ -70,9 +71,9 @@
 				Reuse     => 1,
 				SSL_verify_mode => 0x01,
 				SSL_passwd_cb => sub {return $config{'SSLpasswd'}},
-				SSL_key_file => '/etc/pxs/certs/server-key.pem',
-				SSL_cert_file => '/etc/pxs/certs/server-cert.pem',
-				SSL_ca_file => '/etc/pxs/certs/my-ca.pem'
+				SSL_key_file => '@GENTOO_PORTAGE_EPREFIX@/etc/pxs/certs/server-key.pem',
+				SSL_cert_file => '@GENTOO_PORTAGE_EPREFIX@/etc/pxs/certs/server-cert.pem',
+				SSL_ca_file => '@GENTOO_PORTAGE_EPREFIX@/etc/pxs/certs/my-ca.pem'
 			)) ) {
 		syslog("info", "Unable to create socket: ", &IO::Socket::SSL::errstr);
 		exit(0);
