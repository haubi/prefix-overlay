See https://bugs.freedesktop.org/show_bug.cgi?id=22888

===

From ab35337654669d0d935db2a7e84765ec9aa41c7b Mon Sep 17 00:00:00 2001
From: Benjamin Reed <rangerrick@befunk.com>
Date: Wed, 22 Jul 2009 08:47:03 -0400
Subject: [PATCH 1/2] missing HAVE_UNIX_FD_PASSING check

---
 dbus/dbus-message.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/dbus/dbus-message.c b/dbus/dbus-message.c
index 3373229..72d3be8 100644
--- a/dbus/dbus-message.c
+++ b/dbus/dbus-message.c
@@ -3628,9 +3628,13 @@ dbus_set_error_from_message (DBusError   *error,
 dbus_bool_t
 dbus_message_contains_unix_fds(DBusMessage *message)
 {
+#ifdef HAVE_UNIX_FD_PASSING
   _dbus_assert(message);
 
   return message->n_unix_fds > 0;
+#else
+  return FALSE;
+#endif
 }
 
 /** @} */
-- 
1.6.3.2

